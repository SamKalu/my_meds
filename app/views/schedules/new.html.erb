<div data-controller="new-schedule" class="form-container-meds">
  <%= simple_form_for [ @treatment, @schedule ],  data: { new_schedule_target: 'form'} do |f| %>
    <div class="med-cards">
      <%= f.input :med, as: :check_boxes, collection: @meds, input_html: { multiple: true, class: "d-none" }, include_hidden: false,
                  label_method: lambda { |med| "#{cl_image_tag med.photo.key} <div class=\"card-text\"> #{med.name} <br> #{med.description}</div> <div class=\"stock-card\"> #{med.stock} </div>".html_safe  } %>
    </div>
    <div class="form-date-time">
      <div class="schedule-times d-flex align-items-center">
        <div data-new-schedule-target="times" class="times-input">
          <% @schedule.times.each do |time| %>
            <input id="time" type="time" name="schedule[times][]" style="margin-right: -4px" class="datepicker" value="<%= time %>">
          <% end %>
          <input id="time" type="time" name="schedule[times][]" style="margin-right: -4px" class="datepicker">
        </div>
        <i class="fas fa-plus-circle mx-3" data-action="click->new-schedule#addnewtime" ></i>
      </div>
      <%= f.input :weekdays, as: :check_boxes,
                  collection: Schedule::WEEKDAYS,
                  input_html: { class: "weekday-checkbox"},
                  item_label_class: "checkbox-label-weekdays",
                  legend_tag: false %>
      <%= f.submit  %>
    </div>
  <% end %>
</div>